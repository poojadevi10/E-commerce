import React from "react";
import { BrowserRouter as Router, Routes, Route, Link } from "react-router-dom";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

// Dummy product data
const products = [
  { id: 1, name: "Smartphone", price: 499, description: "Latest smartphone with 5G", image: "https://via.placeholder.com/200" },
  { id: 2, name: "Headphones", price: 149, description: "Noise cancelling headphones", image: "https://via.placeholder.com/200" },
  { id: 3, name: "Laptop", price: 999, description: "High performance laptop", image: "https://via.placeholder.com/200" },
];

// Home / E-commerce Page
function Home() {
  return (
    <div className="p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      {products.map((p) => (
        <Card key={p.id} className="shadow-lg rounded-2xl">
          <img src={p.image} alt={p.name} className="rounded-t-2xl w-full h-40 object-cover" />
          <CardContent className="p-4">
            <h2 className="text-lg font-bold">{p.name}</h2>
            <p className="text-gray-600">${p.price}</p>
            <Link to={`/product/${p.id}`}>
              <Button className="mt-2 w-full">View Details</Button>
            </Link>
          </CardContent>
        </Card>
      ))}
    </div>
  );
}

// Product Detail Page
function ProductDetail({ id }) {
  const product = products.find((p) => p.id === parseInt(id));
  if (!product) return <p className="p-6">Product not found</p>;

  return (
    <div className="p-6 max-w-2xl mx-auto">
      <img src={product.image} alt={product.name} className="rounded-2xl w-full h-60 object-cover" />
      <h1 className="text-2xl font-bold mt-4">{product.name}</h1>
      <p className="text-gray-600 mt-2">{product.description}</p>
      <p className="text-xl font-semibold mt-2">${product.price}</p>
      <Link to="/checkout">
        <Button className="mt-4">Buy Now</Button>
      </Link>
    </div>
  );
}

// Checkout Page
function Checkout() {
  return (
    <div className="p-6 max-w-xl mx-auto">
      <h1 className="text-2xl font-bold mb-4">Checkout</h1>
      <Card className="p-4">
        <p className="font-semibold">Order Summary</p>
        <ul className="mt-2">
          {products.slice(0, 2).map((p) => (
            <li key={p.id} className="flex justify-between border-b py-2">
              <span>{p.name}</span>
              <span>${p.price}</span>
            </li>
          ))}
        </ul>
        <p className="mt-4 font-bold">Total: $648</p>
      </Card>

      <form className="mt-6 space-y-4">
        <input type="text" placeholder="Full Name" className="w-full p-2 border rounded" />
        <input type="text" placeholder="Address" className="w-full p-2 border rounded" />
        <input type="text" placeholder="Card Number" className="w-full p-2 border rounded" />
        <Button className="w-full mt-4">Place Order</Button>
      </form>
    </div>
  );
}

// Dashboard Page (Admin)
function Dashboard() {
  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-4">Admin Dashboard</h1>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        <Card className="p-4">
          <h2 className="font-semibold">Products</h2>
          <ul className="mt-2">
            {products.map((p) => (
              <li key={p.id} className="flex justify-between border-b py-2">
                <span>{p.name}</span>
                <span>${p.price}</span>
              </li>
            ))}
          </ul>
        </Card>
        <Card className="p-4">
          <h2 className="font-semibold">Orders</h2>
          <ul className="mt-2">
            <li className="flex justify-between border-b py-2">
              <span>Order #1001</span>
              <span>$648</span>
            </li>
          </ul>
        </Card>
      </div>
    </div>
  );
}

// Router Setup
export default function App() {
  return (
    <Router>
      <nav className="p-4 bg-gray-800 text-white flex gap-4">
        <Link to="/">Home</Link>
        <Link to="/dashboard">Dashboard</Link>
      </nav>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/product/:id" element={<ProductWrapper />} />
        <Route path="/checkout" element={<Checkout />} />
        <Route path="/dashboard" element={<Dashboard />} />
      </Routes>
    </Router>
  );
}

// Wrapper to extract params
import { useParams } from "react-router-dom";
function ProductWrapper() {
  const { id } = useParams();
  return <ProductDetail id={id} />;
}
